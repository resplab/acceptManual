[
["section-introduction.html", "Acute COPD Exacerbation Prediction Tool (ACCEPT) 1 Introduction", " Acute COPD Exacerbation Prediction Tool (ACCEPT) Ainsleigh Hill University of British Columbia 1 Introduction The purpose of this package is to predict future COPD exacerbation rates and severity based on past exacerbation rates. It might be helpful to take a look at the ACCEPT web application before reading further, as this gives a visualization of the package: ACCEPT Web Application. "],
["section-thestudy.html", "2 The Study 2.1 Background 2.2 The Study Population 2.3 Data Collection: Combined Trials", " 2 The Study The accept package and application are based on the paper Development and External Validation of the Acute COPD Exacerbation Prediction Tool (ACCEPT), published in 2019. 2.1 Background Chronic Obstructive Pulmonary Disease (COPD) affects 300 million people worldwide. Patients with COPD often experience what is called an acute exacerbation. exacerbation: acute worsening of COPD symptoms; acute means sudden onset, short in duration; COPD symptoms include shortness of breath, wheezing, coughing up mucus, etc. Exacerbation Causes Bacterial Infections 3 days ago Fun fact: Mucopurulent and purlent sputum are sputum types containing pus, which turns them a green-yellow color. A study found that 85% of patients with this type of sputum have bacteria in the sputum. Mucoid sputum is sputum without pus, so white in color. Patients with this type of sputum have a 35% chance of bacteria. This means sputum color is a decent test for whether or not to treat with antibiotics (which only work on bacteria). Viral Infections 3 days ago Air Pollution 3 days ago Cold Weather 3 days ago Interruption of Treatment 3 days ago Exacerbation Severity Mild Moderate Severe Patient has an increased need for medication, but does not need hospital care. Patient has an increased need for medication, and seeks medical assistance. Patient (caregiver) recongizes rapid deterioration in condition, requiring hospitalization. References COPD exacerbations: definitions and classifications Toward a consensus definition for COPD exacerbations 2.2 The Study Population The data for this study was taken from three different studies: Macrolide Azithromycin to Prevent Rapid Worsening of Symptoms in COPD (MACRO) Simvastatin for the Prevention of Exacerbations in Moderate-to-Severe COPD ( STATCOPE) Optimal Therapy of COPD to Prevent Exacerbations and Improve Quality of Life (OPTIMAL) Clinical Trial 1: MACRO Number of Participants: 1142 Type of Study: Clinical Randomized Masking: Triple (Participant, Investigator, Care-Provider) Criteria Age: &gt; 40 years old COPD diagnosis Does not have asthma 10 pack years or more of smoking Study Groups Placebo Sugar Pill The placebo group was given a sugar pill capsule to take once every day for 12 months. Treatment Azithromycin (macrolide antibiotic) The treatment group was given a 250 mg capsule of Azithromycin (macrolide antibiotic) to take once every day for 12 months. Data Collection: Primary Metric Number of COPD Exacerbations The purpose of this study was to investigate the effects of azithromycin treatment on exacerbation rate. The number of COPD exacerbations during the 12 months of the study is the primary metric. Number of Years: 1 year Clinical Trial 2: STATCOPE Number of Participants: 885 Type of Study: Clinical Randomized Masking: Triple (Participant, Investigator, Care-Provider) Criteria Age: 40 - 80 years old COPD diagnosis Does not have asthma 10 pack years or more of smoking Study Groups Placebo Sugar Pill The placebo group was given a sugar pill capsule to take once every day for 37 months. Treatment Simvastatin The treatment group was given 40 mg of simvastatin to take once every day for 37 months. Data Collection: Primary Metric Rate of COPD Exacerbations The purpose of this study was to investigate the effects of azithromycin treatment on exacerbation rate. The number of COPD exacerbations per year during the 37 months of the study is the primary metric. Number of Years: 3 years Clinical Trial 3: OPTIMAL Number of Participants: 432 Type of Study: Clinical Randomized Masking: Double (Participant, Investigator) Criteria Age: &gt; 35 years old COPD diagnosis Does not have asthma 10 pack years or more of smoking at least 1 COPD exacerbation in the last year Study Groups Placebo Sugar Pill The placebo group was given 2 puffs/day from a placebo inhaler for 12 months Treatment 1 Salmeterol Inhaler The treatment group was given 2 puffs/day from a Salmeterol inhaler containing 25 ug/puff of salmeterol for 12 months. Treatment 2 Advair The treatment group was given 2 puffs/day from an Advair inhaler containing 25 ug/puff of salmeterol and 250 ug/puff of fluticasone for 12 months. Data Collection: Primary Metric Number of COPD Exacerbations The purpose of this study was to investigate the effects of Salmeterol and/or Advair treatment on exacerbation rate. The number of COPD exacerbations during the 12 months of the study is the primary metric. Number of Years: 3 years 2.3 Data Collection: Combined Trials For our study, we combined the results from the three trials described above. Primary Metric Exacerbation Rate The purpose of this study was determine the exacerbation rate of a patient, defined as the # exacerbations / year. We break this down into severe exacerbation rate and overall exacerbation rate. Additionally, we include the results from the MACRO study to predict exacerbation rate with and without the use of Azithromycin as a treatment. Secondary Metrics Exacerbation History FEV1 % Predicted Smoking Status Age (years) Gender (male or female) Oxygen Therapy SGRQ Score BMI LAMAs LABAs ICs Statins Number of exacerbations (severe and mild/moderate) in the last year. Prediction % FEV1 Score. Whether or not a patient currently smokes. 1 = smoker, 0 = non-smoker Patient age at the beginning of the study. For the purpose of this study, we only looked at \"Male\" and \"Female\" genders. Domiciliary Oxygen Therapy: At-home oxygen therapy, used to treat COPD. This metric measures whether or not a patient uses oxygen therapy, 1 = Yes, 0 = No. St. George's Respiratory Questionnaire: This questionnaire is to help doctors/patients determine how much COPD is affecting day-to-day life. The score from the questionnaire is correlated to cough, sputum, and wheezing symptoms. Questionnaire Download SGRQ Overview Body Mass Index: ratio of weight (kg) to height squared (m^2) Long-Acting Muscarinic receptor Antagonists: used for treatment of COPD. This metric asks whether or not a patient has used LAMAs in the past year. Long-Acting β2 Agonists: used for treatment of COPD. This metric asks whether or not a patient has used LABAs in the past year. Inhaled Glucocorticoids: used for treatment of COPD. This metric asks whether or not a patient has used inhaled glucocorticoids in the past year. Statins: generally used to lower cholesteral in blood, but some studies have recently shown they can be effective in COPD treatment. This metric asks whether or not a patient has used statins in the past year. "],
["section-packageinR.html", "3 Using the Package in R 3.1 Installation 3.2 ACCEPT Prediction Functions", " 3 Using the Package in R 3.1 Installation If you do not have R installed on your computer, please go to Appendix 1. Once you have R installed, you can install this package in the R console: install.packages(&quot;devtools&quot;) devtools::install_github(&quot;resplab/accept&quot;) 3.2 ACCEPT Prediction Functions Sample Data To get started, there is an R data frame with the package of sample patient data. I have printed columns 1-13 and 14-19 separately because there isn’t enough space: library(accept) samplePatients = accept::samplePatients print(samplePatients[,1:13]) &gt; # A tibble: 2 x 13 &gt; ID male age smoker oxygen statin LAMA LABA ICS FEV1 BMI &gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &gt; 1 10001 1 70 1 1 1 1 1 1 33 25 &gt; 2 10002 0 42 0 1 0 1 1 0 40 35 &gt; # … with 2 more variables: SGRQ &lt;dbl&gt;, LastYrExacCount &lt;dbl&gt; print(samplePatients[,14:19]) &gt; # A tibble: 2 x 6 &gt; LastYrSevExacCo… randomized_azit… randomized_stat… randomized_LAMA &gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &gt; 1 1 0 0 0 &gt; 2 0 0 0 0 &gt; # … with 2 more variables: randomized_LABA &lt;dbl&gt;, randomized_ICS &lt;dbl&gt; ID male age smoker oxygen statin LAMA LABA ICS FEV1 BMI SGRQ LastYrExacCount LastYrSevExacCount randomized_azithromycin randomized_statin randomized_LAMA randomized_LABA randomized_ICS Patient ID. This is useful if you want to look at many patients at once. If you don't have an ID, you can just make up a number here. Gender of the patient. 1 = male, 0 = female Patient age at the beginning of the study. Whether or not a patient currently smokes. 1 = smoker, 0 = non-smoker Domiciliary Oxygen Therapy: At-home oxygen therapy, used to treat COPD. This metric measures whether or not a patient uses oxygen therapy, 1 = Yes, 0 = No. Statins: generally used to lower cholesteral in blood, but some studies have recently shown they can be effective in COPD treatment. This metric asks whether or not a patient has used statins in the past year. Long-Acting Muscarinic receptor Antagonists: used for treatment of COPD. This metric asks whether or not a patient has used LAMAs in the past year. Long-Acting β2 Agonists: used for treatment of COPD. This metric asks whether or not a patient has used LABAs in the past year. Inhaled Glucocorticoids: used for treatment of COPD. This metric asks whether or not a patient has used inhaled glucocorticoids in the past year. Prediction % FEV1 Score. Body Mass Index: ratio of weight (kg) to height squared (m^2) St. George's Respiratory Questionnaire: This questionnaire is to help doctors/patients determine how much COPD is affecting day-to-day life. The score from the questionnaire is correlated to cough, sputum, and wheezing symptoms. Questionnaire Download SGRQ Overview Number of exacerbations (severe and mild/moderate) in the last year. Number of severe exacerbations in the last year. Whether the patient was randomized to receive azithromycin. Should be 0 for prediction (0,1) Whether the patient was randomized to receive statins. Should be 0 for prediction (0,1) Whether the patient was randomized to receive LAMAs. Should be 0 for prediction (0,1) Whether the patient was randomized to receive LABAs. Should be 0 for prediction (0,1) Whether the patient was randomized to receive ICs. Should be 0 for prediction (0,1) Exacerbation Rate To get a prediction for exacerbation rate, you will need to pass in a patient vector: results &lt;- predictACCEPT(samplePatients[1,]) print(t(results)) &gt; [,1] &gt; ID &quot;10001&quot; &gt; male &quot;1&quot; &gt; age &quot;70&quot; &gt; smoker &quot;1&quot; &gt; oxygen &quot;1&quot; &gt; statin &quot;1&quot; &gt; LAMA &quot;1&quot; &gt; LABA &quot;1&quot; &gt; ICS &quot;1&quot; &gt; FEV1 &quot;33&quot; &gt; BMI &quot;25&quot; &gt; SGRQ &quot;50&quot; &gt; LastYrExacCount &quot;2&quot; &gt; LastYrSevExacCount &quot;1&quot; &gt; randomized_azithromycin &quot;0&quot; &gt; randomized_statin &quot;0&quot; &gt; randomized_LAMA &quot;0&quot; &gt; randomized_LABA &quot;0&quot; &gt; randomized_ICS &quot;0&quot; &gt; predicted_exac_probability &quot;0.782451&quot; &gt; predicted_exac_rate &quot;1.836634&quot; &gt; azithromycin_predicted_exac_probability &quot;0.7064634&quot; &gt; azithromycin_predicted_exac_rate &quot;1.424445&quot; &gt; predicted_severe_exac_probability &quot;0.4368626&quot; &gt; predicted_severe_exac_rate &quot;0.7667806&quot; &gt; azithromycin_predicted_severe_exac_probability &quot;0.4231632&quot; &gt; azithromycin_predicted_severe_exac_rate &quot;0.5752882&quot; &gt; predicted_exac_probability_lower_PI &quot;0.4492188&quot; &gt; predicted_exac_probability_upper_PI &quot;0.9847202&quot; &gt; predicted_exac_rate_lower_PI &quot;0.596418&quot; &gt; predicted_exac_rate_upper_PI &quot;4.181226&quot; &gt; azithromycin_predicted_exac_probability_lower_PI &quot;0.3703341&quot; &gt; azithromycin_predicted_exac_probability_upper_PI &quot;0.9609475&quot; &gt; azithromycin_predicted_exac_rate_lower_PI &quot;0.4625661&quot; &gt; azithromycin_predicted_exac_rate_upper_PI &quot;3.242849&quot; &gt; predicted_severe_exac_probability_lower_PI &quot;0.07155188&quot; &gt; predicted_severe_exac_probability_upper_PI &quot;0.9114282&quot; &gt; predicted_severe_exac_rate_lower_PI &quot;0.1062302&quot; &gt; predicted_severe_exac_rate_upper_PI &quot;2.056521&quot; &gt; azithromycin_predicted_severe_exac_probability_lower_PI &quot;0.06687822&quot; &gt; azithromycin_predicted_severe_exac_probability_upper_PI &quot;0.9053923&quot; &gt; azithromycin_predicted_severe_exac_rate_lower_PI &quot;0.07706222&quot; &gt; azithromycin_predicted_severe_exac_rate_upper_PI &quot;1.56586&quot; &gt; predicted_exac_probability_lower_CI &quot;0.7739183&quot; &gt; predicted_exac_probability_upper_CI &quot;0.7911423&quot; &gt; predicted_exac_rate_lower_CI &quot;1.782039&quot; &gt; predicted_exac_rate_upper_CI &quot;1.891716&quot; &gt; azithromycin_predicted_exac_probability_lower_CI &quot;0.6968129&quot; &gt; azithromycin_predicted_exac_probability_upper_CI &quot;0.7163897&quot; &gt; azithromycin_predicted_exac_rate_lower_CI &quot;1.379001&quot; &gt; azithromycin_predicted_exac_rate_upper_CI &quot;1.470041&quot; &gt; predicted_severe_exac_probability_lower_CI &quot;0.4224972&quot; &gt; predicted_severe_exac_probability_upper_CI &quot;0.4527262&quot; &gt; predicted_severe_exac_rate_lower_CI &quot;0.7329137&quot; &gt; predicted_severe_exac_rate_upper_CI &quot;0.7999468&quot; &gt; azithromycin_predicted_severe_exac_probability_lower_CI &quot;0.4092337&quot; &gt; azithromycin_predicted_severe_exac_probability_upper_CI &quot;0.4387845&quot; &gt; azithromycin_predicted_severe_exac_rate_lower_CI &quot;0.5473614&quot; &gt; azithromycin_predicted_severe_exac_rate_upper_CI &quot;0.6003364&quot; The predictACCEPT() function returns a data frame with the original patient data, along with the predictions for different treatment options. Here is a summary of the results: Azithromycin No Treatment Overall Severe Probability Rate Confidence Interval Prediction Interval azithromycin_predicted_ Prediction if the patient is treated with 250 mg / day of azithromycin predicted_ Prediction if patient is not treated with azithromycin exac_ All exacerbations (mild, moderate, severe) severe_exac_ Severe exacerbations only probability Probability of at least one exacerbation next year rate Number of exacerbations / year _upper_CI _lower_CI 95 % confidence interval _upper_PI _lower_PI Prediction Interval To visualize the data, there is a graphing function called plotExacerbations(), which creates a Plotly bar graph. You have the option of selecting probability or rate for which prediction you want to see, and either CI or PI to select the confidence interval or prediction interval respectively. plotExacerbations(results, type=&quot;probability&quot;, interval = &quot;CI&quot;) plotExacerbations(results, type=&quot;probability&quot;, interval = &quot;PI&quot;) plotExacerbations(results, type=&quot;rate&quot;, interval = &quot;CI&quot;) Probability of N Exacerbations (Poisson) We can also calculate the predicted number of exacerbations in a year: patientResults = predictACCEPT(samplePatients[1,]) exacerbationsMatrix = predictCountProb(patientResults, n = 10, shortened = TRUE) print(exacerbationsMatrix) &gt; none severe 1 severe 2 severe 3 or more severe &gt; no exacerbations 0.15504227 0.0000000 0.00000000 0.00000000 &gt; 1 exacerbation 0.16016552 0.1288422 0.00000000 0.00000000 &gt; 2 exacerbations 0.08272903 0.1330997 0.05353479 0.00000000 &gt; 3 or more exacerbations 0.03767078 0.1000534 0.09687492 0.04166046 The shortened parameter groups the probabilities from 3-10 exacerbations into one category, “3 or more exacerbations.” To see all n exacerbation probabilities: exacerbationsMatrix = predictCountProb(patientResults, n = 10, shortened = FALSE) print(exacerbationsMatrix) &gt; 0 severe 1 severe 2 severe 3 severe &gt; 0 exacerbation(s) 1.550423e-01 0.000000e+00 0.000000e+00 0.000000e+00 &gt; 1 exacerbation(s) 1.601655e-01 1.288422e-01 0.000000e+00 0.000000e+00 &gt; 2 exacerbation(s) 8.272903e-02 1.330997e-01 5.353479e-02 0.000000e+00 &gt; 3 exacerbation(s) 2.848758e-02 6.874892e-02 5.530380e-02 1.482937e-02 &gt; 4 exacerbation(s) 7.357232e-03 2.367356e-02 2.856563e-02 1.531940e-02 &gt; 5 exacerbation(s) 1.520069e-03 6.113958e-03 9.836521e-03 7.912807e-03 &gt; 6 exacerbation(s) 2.617164e-04 1.263198e-03 2.540390e-03 2.724760e-03 &gt; 7 exacerbation(s) 3.862352e-05 2.174898e-04 5.248670e-04 7.036993e-04 &gt; 8 exacerbation(s) 4.987476e-06 3.209666e-05 9.036848e-05 1.453905e-04 &gt; 9 exacerbation(s) 5.724759e-07 4.144658e-06 1.333638e-05 2.503247e-05 &gt; 4 severe 5 severe 6 severe 7 severe &gt; 0 exacerbation(s) 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 &gt; 1 exacerbation(s) 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 &gt; 2 exacerbation(s) 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 &gt; 3 exacerbation(s) 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 &gt; 4 exacerbation(s) 3.080851e-03 0.000000e+00 0.000000e+00 0.000000e+00 &gt; 5 exacerbation(s) 3.182656e-03 5.120457e-04 0.000000e+00 0.000000e+00 &gt; 6 exacerbation(s) 1.643912e-03 5.289658e-04 7.091946e-05 0.000000e+00 &gt; 7 exacerbation(s) 5.660779e-04 2.732225e-04 7.326294e-05 8.419288e-06 &gt; 8 exacerbation(s) 1.461959e-04 9.408365e-05 3.784193e-05 8.697496e-06 &gt; 9 exacerbation(s) 3.020536e-05 2.429814e-05 1.303079e-05 4.492449e-06 &gt; 8 severe 9 severe &gt; 0 exacerbation(s) 0.000000e+00 0.000000e+00 &gt; 1 exacerbation(s) 0.000000e+00 0.000000e+00 &gt; 2 exacerbation(s) 0.000000e+00 0.000000e+00 &gt; 3 exacerbation(s) 0.000000e+00 0.000000e+00 &gt; 4 exacerbation(s) 0.000000e+00 0.000000e+00 &gt; 5 exacerbation(s) 0.000000e+00 0.000000e+00 &gt; 6 exacerbation(s) 0.000000e+00 0.000000e+00 &gt; 7 exacerbation(s) 0.000000e+00 0.000000e+00 &gt; 8 exacerbation(s) 8.745675e-07 0.000000e+00 &gt; 9 exacerbation(s) 9.034669e-07 8.075302e-08 To visualize the matrix as a heatmap, we can use the function plotHeatMap: plotHeatMap(patientResults, shortened = FALSE) "],
["section-webapp.html", "4 Using the Web Application", " 4 Using the Web Application We have created a web application which can be found here: ACCEPT Web Application "],
["section-using-the-package-as-an-api-prism.html", "5 Using the Package as an API (PRISM) 5.1 R API 5.2 Shell/Bash API 5.3 Python API 5.4 Javascript API", " 5 Using the Package as an API (PRISM) PRISM (Programmable Interface for Simulation/Statistical Models) is a package which provides a user-friendly API interface in R for clinical prediction and decision analytics models hosted on UBC PRISM cloud. For more information, the PRISM package can be found on GitHub at PRISM on GitHub. 5.1 R API To install PRISM in R, you will need to install it from GitHub. In an R Console: devtools::install_github(&quot;resplab/prism&quot;) To use PRISM in R: 5.2 Shell/Bash API 5.2.1 Linux You will need curl installed to use the API. To check if you have curl: dpkg -l curl If you do not have curl, you can install it by: sudo apt install curl 5.2.2 Mac OS You will need curl installed to use the API. To check if you have curl: brew list curl If you do not have curl, you can install it using HomeBrew: brew install curl 5.2.3 Windows PowerShell In PowerShell: 5.3 Python API For this, we are assuming the use of Python 3. To get started, you will need to import the json and requests libraries. To install, open a terminal: pip3 install requests We will start with the GET request. If everything is working, this should return 200 as a response. For the POST request, we will send some patient data to the API, and should get a prediction back from the API. We will put the results in a dictionary: To visualize the results using the package PrettyTable: 5.4 Javascript API To use the PRISM API in Javascript, you will need to use the XMLHttpRequest module. We will start by sending a GET request: The onreadystatechange is an XMLHttpRequest event which updates when the ready state changes. The ready state can be either 1, 2, 3, or 4. &gt; null device &gt; 1 To get a prediction, we can send a POST request. We will first create an example patient using json: We need to set the request header to json, and then send our patient json to the PRISM server using the request.send() function. "],
["section-appendix1.html", "6 Appendix 1: Installing R 6.1 Step 1: Mirrors 6.2 Mac OS X 6.3 Windows", " 6 Appendix 1: Installing R This is a guide to installing R, geared mainly at beginner audiences. All the information below can be found at https://www.r-project.org/; I’ve just simplified it a bit. 6.1 Step 1: Mirrors When you go the the R home page, you will see a link to download R, which will take you to a list of mirrors. They are organized by country, so click on one that is close to your location. Since our group is based out of Vancouver, I will select one of the mirrors in Canada: SFU Mirror. Once you have clicked on the closest mirror, you will be asked to choose what type of computer you have. 6.2 Mac OS X If you are using a Mac (Apple) computer, click on the link for Mac OS X. You will be redirected to a page that says “R for Mac OS X.” To install R, you want to click on one of the files ending in “.pkg”. If your operating system is fairly up-to-date, scroll to “Latest Release” and click on the file that looks like “R-3.X.Y.pkg,” with X and Y being numbers for the latest release. R should begin downloading, and your Mac package manager will pop up with the rest of the instructions. If your operating system is older, you might want to scroll down to “Legacy Releases,” and download one of those “.pkg” files instead. It should tell you on the page what version your computer should use. 6.3 Windows If you are using Windows, click on the link for Windows. You will be redirected to a page that says “R for Windows.” To install R, click on the link “base,” and on the next page, “Download R 3.X.Y for Windows,” where X and Y are the version numbers for the latest release. R should begin downloading. "]
]
